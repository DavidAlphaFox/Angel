 * ghc 6.10 support? (patches welcome)
 * replace bizarre usage of TVar with TMVar or just MVar
 * massive module cleanup
